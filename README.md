# Learn

## 2024.09.23, 월, DB

  - **⚛️트랜잭션(Transaction)**
    - 트랜잭션은 데이터베이스의 상태를 변화시키는 일련의 작업, 하나의 논리적인 작업 단위로 취급.
    - 일반적으로 트랜잭션은 여러 SQL문으로 구성되며, 그 작업들이 ***모두*** 성공하거나, ***모두*** 실패하는 "**원자성**"을 보장해야 한다.
    - *예시* -> 은행에서 계좌 이체 작업이 있을 때, A계좌에서 100만원을 빼고 B계좌에 100만원을 더하는 작업은 하나의 트랜잭션으로 간주된다. 이 때, A계좌에서만 돈이 빠져나가고 B계좌에 돈이 들어가지 않는 상태는 발생하면 안된다. 전체 작업이 성공하거나, 실패하는 모두 롤백(원래 상태로 돌아감)되어야 한다.

  - **🧰ACID 특성**
    - **A**tomicity(원자성)
      - 트랜잭션이 데이터베이스에 모두 반영되든지, 아니면 전혀 반영되지 않도록 보장하는 특성. 트랜잭션 내의 모든 작업은 하나의 단위로 취급되며, 그 작업들이 전부 성공해야만 데이터베이스에 반영된다.
    
    - **C**onsistency(일관성)
      - 트랜잭션이 실행되기 전과 후에 데이터베이스가 일관된 상태를 유지하도록 보장하는 특성. 트랜잭션이 성공적으로 완료되면, 데이터베이스의 무결성 제약 조건을 모두 만족해야 한다. 예를 들어, 외래 키 제약, 고유 제약 조건 등이 깨지지 않고 유지되어야 한다.

    - **I**solation(격리성)
      - 동시에 여러 트랜잭션이 실행될 때, 각 트랜잭션은 서로 간섭하지 않고 독립적으로 실행되는 것처럼 보여야 하는 특성. 격리성은 여러 트랜잭션이 동일한 데이터를 동시에 읽거나 수정할 때, 서로 간섭하지 않도록 보장한다.

    - **D**urability(지속성)
      - 트랜잭션이 성공적으로 완료되면, 그 결과는 영구적으로 저장되어 시스템이 실패하더라도 보존되는 특성. 예를 들어, 서버가 다운되거나 시스템 오류가 발생해도 트랜잭션에 의해 변경된 데이터는 손실되지 않아야 한다.
  
## 2024.09.24, 화, DB

### 👻**데이터베이스의 아키텍처(Architecture)**

  - **논리적 아키텍처(Logical Architecture)**
    - 논리적 아키텍처는 데이터베이스 시스템이 사용자의 요청을 처리하는 방식과 관련된 구조. 주로 사용자가 데이터에 접근하는 방법과 데이터를 관리하는 논리적 계층 구조를 나타낸다.
    
    - ***1-티어 아키텍처(Single-tier Architecture)***
      - 모든 데이터베이스 구성 요소가 하나의 시스템 내에 존재하는 아키텍처. 사용자 인터페이스(UI), 애플리케이션, 데이터베이스 서버가 모두 동일한 물리적 장치에 존재하는 경우.

    - ***2-티어 아키텍처(Two-tier Architecture)***
      - 클라이언트-서버 아키텍처로도 알려져 있음. 사용자 인터페이스와 애플리케이션 로직은 클라이언트 측에 있고, 데이터베이스는 별도의 서버에 위치한다. 클라이언트는 데이터베이스와 직접 통신하여 데이터를 요청하고 처리한다.

    - ***3-티어 아키텍처(Three-tier Architecture)***
      - 클라이언트(사용자 인터페이스), 애플리케이션 서버(비즈니스 로직을 처리), 데이터베이스 서버(데이터 저장 및 관리)로 구성된다. 클라이언트는 애플리케이션 서버를 통해 데이터베이스 서버와 통신한다.
      - 보안성, 유지보수성, 확장성이 뛰어나며, 대규모 시스템에서 사용.

    - ***N-티어 아키텍처(N-tier Architecture)***
      - 3티어 아키텍처에서 더 많은 레이어가 추가된 구조. 여기에는 웹 서버, 애플리케이션 서버, 데이터베이스 서버 등 다양한 계층이 포함될 수 있다. 


  - **물리적 아키텍처(physical Architecture)**
    - 물리적 아키텍처는 데이터베이스 시스템이 실제로 데이터가 어떻게 저장되고 관리되는지를 설명하는 구조. 데이터베이스 시스템의 성능과 안정성은 물리적 아키텍처에 크게 좌우된다.

    - ***데이터 저장소(Storage System)***
      - 데이터베이스는 데이터를 **디스크**나 **SSD**같은 저장 장치에 저장한다.
    - ***캐싱 및 버퍼관리***
      - 데이터베이스는 성능을 향상시키기 위해 **메모리**를 사용하여 자주 사용되는 데이터를 캐싱한다. 버퍼 풀(Buffer Pool)이라는 메모리 영역에 데이터를 미리 적재하여, 디스크 I/O를 줄이고 성능을 높인다.
    - ***프로세스 관리***
      - 데이터베이스 시스템은 **멀티스레드 프로세스**를 통해 다중 사용자의 요청을 동시에 처리한다. 각 사용자의 요청은 **독립적인 트랜잭션**으로 처리되며, 트랜잭션 간의 격리성과 동시성을 관리하는 역할을 한다.
    - ***인덱스와 파티셔닝***
      - **인덱스**는 데이터 검색 속도를 높이기 위해 사용. 인덱스는 데이터베이스 테이블의 특정 열에 대해 빠르게 조회할 수 있도록 도와주는 자료구조.
      - **파티셔닝**은 대용량의 데이터를 관리하기 위한 기술. 테이블을 여러 개의 작은 단위로 나누어 관리함으로써 성능과 관리 효율성을 높임.
    - ***복제와 클러스터링***
      - 데이터베이스 시스템은 고가용성과 데이터 무결성을 보장하기 위해 데이터 복제나 클러스터링 기술을 사용한다.
      - **복제(Replication)** : 데이터를 여러 대의 서버에 복사하여, 장애 발생 시 데이터를 보호하고 읽기 작업을 분산시킴.
      - **클러스터링(Clustering)** : 여러 대의 서버가 하나의 데이터베이스를 관리하며, 고가용성과 확장성을 제공.

  - **데이터베이스 시스템의 주요 컴포넌트**
    - 데이터베이스 아키텍처의 핵심 구성 요소들.
    - ***DBMS(Database Management System)***
      - DBMS는 데이터베이스를 생성하고 관리하는 소프트웨어. 데이터의 저장, 검색, 수정, 삭제와 같은 작업을 수행하며, 트랜잭션과 같은 고급 기능을 제공한다. 대표적인 DBMS는 MySQL, PostgreSQL, Oracle, SQL Server등이 있다.
    - ***SQL 엔진***
      - SQL엔진은 사용자가 작성한 SQL 쿼리를 해석하고 실행하는 핵심 모듈이다. 쿼리 최적화, 실행 계획 수립, 트랜잭션 관리 등을 담당.
    - ***스토리지 엔진***
      - 스토리지 엔진은 데이터를 실제로 저장하고 관리하는 모듈. 다양한 유형의 스토리지 엔진이 존재하며, 각기 다른 성능과 특성을 갖고 있다. 예를 들어, MySQL에는 InnoDB와 MyISAM 같은 여러 스토리지 엔진이 있다.
    - ***트랜잭션 관리자***
      - 트랜잭션 관리자는 ACID 특성을 준수하며 트랜잭션을 관리. 트랜잭션 간의 격리성, 원자성을 보장하고, 오류 발생 시 롤백을 통해 데이터 일관성을 유지한다.
    - ***보안 모듈***
      - 보안 모듈은 데이터베이스의 접근 제어와 권한 권리를 담당. 데이터베이스 사용자나 애플리케이션이 허가된 데이터에만 접근할 수 있도록 제어한다.

  - 요약
    - 데이터베이스 아키텍처는 **논리적 아키텍처**와 **물리적 아키텍처**로 나누어 이해할 수 있다. 논리적 아키텍처는 사용자와 데이터베이스 간의 상호작용을 설명하고, 물리적 아키텍처는 데이터가 실제로 어떻게 저장되고 처리되는지를 다룬다. 각종 DBMS 시스템에서는 이러한 아키텍처에 따라 데이터의 일관성, 성능, 확장성, 보안을 보장하며, 최신 클라우드 기반 시스템에서는 자동화와 확장성에 중점을 두고 설계된다.


## 2024.09.25, 수, DB

- SET PERSIST는 MySQL 8.0 이상 버전에서 사용되는 명령어. 시스템 변수를 **영구적으로 변경**하기 위해 사용된다. 즉, 데이터베이스 서버를 재시작하더라도 설정된 시스템 변수가 유지되도록 설정할 수 있다. 이 명령어는 기존의 SET 명령어와 달리, 설정된 값을 **MySQL 설정 파일**에 자동으로 기록해준다.

- 설정된 값은 mysqld-auto.cnf 파일에 기록된다. 이 파일은 MySQL 설정 파일(예: my.cnf)과는 별도로 관리된다.

- SET PERSIST_ONLY는 변수의 값을 **메모리에 반영하지 않고** mysqld-auto.cnf 파일에만 저장하여, **서버가 재시작된 후에만** 변경 사항이 적용되도록 한다.

```sql
// max_connections 값을 영구적으로 변경.
SET PERSIST max_connections = 200;
```